startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = api_call))
# content <- fromJSON(rawToChar(response$content), flatten = TRUE)
#  results <- content$results
# return(results) }
}
test <- get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-01", "standard")
View(test)
get_weather_data <- function(token, zip, startdate, enddate, units) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = token))
# content <- fromJSON(rawToChar(response$content), flatten = TRUE)
#  results <- content$results
# return(results) }
}
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-01", "standard")
View(test)
get_weather_data <- function(t, zip, startdate, enddate, units) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = t))
# content <- fromJSON(rawToChar(response$content), flatten = TRUE)
#  results <- content$results
# return(results) }
}
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-01", "standard")
View(test)
get_weather_data <- function(t, zip, startdate, enddate, units) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = t))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
return(results) }
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-01", "standard")
get_weather_data <- function(token, zip, startdate, enddate, units) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
return(results) }
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-01", "standard")
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-05", "standard")
get_weather_data <- function(token, zip, startdate, enddate, units) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-05", "standard")
library(dplyr)
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-05", "standard")
get_weather_data <- function(token, zip, startdate, enddate, units) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-05", "standard")
library(httr)
library(jsonlite)
library(dplyr)
get_weather_data <- function(token, zip, startdate, enddate, units) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
get_weather_data("RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "28801", "2010-05-01", "2010-05-05", "standard")
mdy(2010-05-01)
library(lubridate)
mdy(2010-05-01)
ymd(2010-05-01)
start <- "2010-05-01"
start %>% format('%Y-%b')
format(start, "%d/%m/%y")
format(start, "%d-%m-%y")
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-05-01", enddate = "2010-05-05", unit = "standard")
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf",
zip = "28801", unit = "standard",
startyear = "2010", startdate = "01", startmonth = "05",
endyear = "2010", enddate = "05", endmonth = "05")
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", unit = "standard", zip = "28801", startdate = "2010-05-01",
enddate = "2010-05-05")
get_weather_data <- function(token, zip, unit, startdate, enddate) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
print(api_call)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", unit = "standard", startdate = "2010-05-01",
enddate = "2010-05-05")
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf",
zip = "28801", unit = "standard",
startyear = "2010", startdate = "01", startmonth = "05",
endyear = "2010", enddate = "05", endmonth = "05")
if(!(enddate & startdate == str_match(".*"))) {
print("test")
}
enddate <- 2010-12-05
enddate <- "2010-12-05"
startdate <- "2010-12-01"
if(!(enddate & startdate == str_match(".*"))) {
print("test")
}
library(stringr)
if(!(enddate & startdate == str_match(".*"))) {
print("test")
}
if(!(str_match(enddate, ".*") & str_match(startdate, ".*"))) {
print("test")
}
if(str_match(enddate, ".*") & str_match(startdate, ".*")) {
print("test")
}
if(str_match(enddate, ".*") && str_match(startdate, ".*")) {
print("test")
}
enddate = "2010-12-05"
if(str_match(enddate, ".*")) {
print("test")
}
library(stringr)
if(str_match(enddate, ".*")) {
print("test")
}
library(stringr)
if(str_detect(enddate, ".*")) {
print("test")
}
library(stringr)
if(str_detect(enddate, ".*{4}-.*")) {
print("test")
}
library(stringr)
if(str_detect(enddate, ".{4}-.*")) {
print("test")
}
library(stringr)
if(str_detect(enddate, "[0-9]{4}-.*")) {
print("test")
}
library(stringr)
if(str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}")) {
print("test")
}
library(stringr)
if(!(str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
print("test")
}
if(!(str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
print("Dates must be in YYYY-MM-DD format.")
}
enddate <- "09"
library(stringr)
if(!(str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
print("Dates must be in YYYY-MM-DD format.")
}
get_weather_data <- function(token, zip, startdate, enddate, units) {
if(!(str_detect(startdate, "[0-9]{4}-[0-9]{2}-[0-9]{2}") & str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
stop("Dates must be in YYYY-MM-DD format.") }
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010-12-05", units = "standard")
library(httr)
library(jsonlite)
library(dplyr)
library(stringr)
get_weather_data <- function(token, zip, startdate, enddate, units) {
if(!(str_detect(startdate, "[0-9]{4}-[0-9]{2}-[0-9]{2}") & str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
stop("Dates must be in YYYY-MM-DD format.") }
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010-12-05", units = "standard")
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010", units = "standard")
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010",
enddate = "2010-12-05", units = "standard")
get_station_data <- function(station_no){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
api_call <- paste0(base, station_no)
response <- GET(api_call, add_headers("token" = token))
print(response)
# content <- fromJSON(rawToChar(response$content), flatten = TRUE)
#results <- content$results
}
get_station_data <- function(token, station_no){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
api_call <- paste0(base, station_no)
response <- GET(api_call, add_headers("token" = token))
print(response)
# content <- fromJSON(rawToChar(response$content), flatten = TRUE)
#results <- content$results
}
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "COOP:010008")
get_station_data <- function(token, station_no){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
api_call <- paste0(base, station_no)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
return(content)
#results <- content$results
}
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "COOP:010008")
a <- get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "COOP:010008")
View(a)
get_weather_data <- function(token, zip, startdate, enddate, units) {
if(!(str_detect(startdate, "[0-9]{4}-[0-9]{2}-[0-9]{2}") & str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
stop("Dates must be in YYYY-MM-DD format.") }
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
b <- get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010-12-05", units = "standard")
View(b)
View(b)
View(a)
get_station_data <- function(token, station_no){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
api_call <- paste0(base, station_no)
response <- GET(api_call, add_headers("token" = token))
content <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
return(content)
}
a <- get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "COOP:010008")
View(a)
get_station_data <- function(token, station_no){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
api_call <- paste0(base, station_no)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
return(content)
}
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010-12-05", units = "standard")
a <- get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", "COOP:010008")
View(a)
library(httr)
library(jsonlite)
library(dplyr)
library(stringr)
keyword_search <- function(results, keyword) {
if(length(keyword) > 1) {
keyword <- paste(keyword, collapse = "|") }
results %>%
filter(str_detect(body, keyword)) }
get_weather_data <- function(token, zip, startdate, enddate, units) {
if(!(str_detect(startdate, "[0-9]{4}-[0-9]{2}-[0-9]{2}") & str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
stop("Dates must be in YYYY-MM-DD format.") }
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
if(!(is.null(keyword))) {
results <- keyword_search(results, keyword) }
return(results) }
get_station_data <- function(token, station_no){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
api_call <- paste0(base, station_no)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
if(!(is.null(keyword))) {
results <- keyword_search(results, keyword) }
return(content) }
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010-12-05", units = "standard")
library(httr)
library(jsonlite)
library(dplyr)
library(stringr)
get_weather_data <- function(token, zip, startdate, enddate, units) {
if(!(str_detect(startdate, "[0-9]{4}-[0-9]{2}-[0-9]{2}") & str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
stop("Dates must be in YYYY-MM-DD format.") }
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
get_station_data <- function(token, station_no){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
out <- data.frame()
if(!(is.null(station_no))) {
for(station in station_no) {
api_call <- paste0(base, station_no)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
out <- bind_rows(out, results) } }
return(out) }
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010-12-05", units = "standard")
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = c("COOP:010008", "GHCND:USW00013872"))
get_station_data <- function(token, station_no){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
out <- data.frame()
if(!(is.null(station_no))) {
for(station in station_no) {
api_call <- paste0(base, station)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
out <- bind_rows(out, results) } }
return(out) }
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010-12-05", units = "standard")
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = c("COOP:010008", "GHCND:USW00013872"))
library(httr)
library(jsonlite)
library(dplyr)
library(stringr)
# TODO: Add limit
get_weather_data <- function(token, zip, startdate, enddate, units, limit=25) {
if(!(str_detect(startdate, "[0-9]{4}-[0-9]{2}-[0-9]{2}") & str_detect(enddate, "[0-9]{4}-[0-9]{2}-[0-9]{2}"))) {
stop("Dates must be in YYYY-MM-DD format.") }
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/data?datasetid=GHCND"
zip <- paste0("locationid=ZIP:", zip)
startdate <- paste0("startdate=", startdate)
enddate <- paste0("enddate=", enddate)
units <- paste0("units=", units)
limit <- paste0("limit=", limit)
api_call <- paste0(base, "&", zip, "&", startdate, "&", enddate, "&", units, "&", limit)
response <- GET(api_call, add_headers("token" = token))
content <- fromJSON(rawToChar(response$content), flatten = TRUE)
results <- content$results
results <- results %>%
select(-attributes)
return(results) }
get_station_data <- function(token, station_no, limit=25){
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
limit <- paste0("limit=", limit)
out <- data.frame()
if(!(is.null(station_no))) {
for(station in station_no) {
api_call <- paste0(base, station, "&", limit)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
out <- bind_rows(out, results) } }
return(out) }
#Default is 25. Max is 1,000
get_weather_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", zip = "28801", startdate = "2010-12-01",
enddate = "2010-12-05", units = "standard", limit = "10")
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = c("COOP:010008", "GHCND:USW00013872"))
get_station_data <- function(token, station_no, limit=25) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
limit <- paste0("limit=", limit)
out <- data.frame()
if(!(is.null(station_no))) {
for(station in station_no) {
api_call <- paste0(base, station, "&", limit)
paste(api_call)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
out <- bind_rows(out, results) } }
return(out) }
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = c("COOP:010008", "GHCND:USW00013872"))
get_station_data <- function(token, station_no, limit=25) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
limit <- paste0("limit=", limit)
if(!(is.null(station_no))) {
results <- data.frame()
for(station in station_no) {
api_call <- paste0(base, station, "&", limit)
response <- GET(api_call, add_headers("token" = token))
content <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
results <- bind_rows(results, content) } }
else {
api_call <- paste0(base, station, "&", limit)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE)) }
return(results) }
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = c("COOP:010008", "GHCND:USW00013872"))
get_station_data <- function(token, station_no, limit=25) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
limit <- paste0("limit=", limit)
api_call <- paste0(base, station_no, "&", limit)
response <- GET(api_call, add_headers("token" = token))
content <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
return(results) }
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = "COOP:010008")
get_station_data <- function(token, station_no, limit=25) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
limit <- paste0("limit=", limit)
api_call <- paste0(base, station_no, "&", limit)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
return(results) }
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = "COOP:010008")
get_station_data <- function(token, station_no, limit=25) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
limit <- paste0("limit=", limit)
api_call <- paste0(base, station_no)#, "&", limit)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
return(results) }
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = "COOP:010008")
get_station_data <- function(token, station_no, limit=25) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
limit <- paste0("limit=", limit)
api_call <- paste0(base, "&", station_no, "&", limit)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
return(results) }
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = "COOP:010008")
get_station_data <- function(token, station_no, limit=25) {
base <- "https://www.ncei.noaa.gov/cdo-web/api/v2/stations/"
limit <- paste0("limit=", limit)
api_call <- paste0(base, station_no, "?", limit)
response <- GET(api_call, add_headers("token" = token))
results <- as.data.frame(fromJSON(rawToChar(response$content), flatten = TRUE))
return(results) }
get_station_data(token = "RwxSOFeVkuTygQpilLiTXWYgtSueUOaf", station_no = "COOP:010008")
